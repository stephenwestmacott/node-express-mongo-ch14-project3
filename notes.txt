document.addEventListener('DOMContentLoaded', () => {
    fetch('/api/paintings')
        .then(response => response.json())
        .then(data => {
            const paintingsList = document.getElementById('paintings-list');
            data.forEach(painting => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <img src="/images/${painting.ImageFileName}" alt="${painting.Title}" width="50">
                    <button onclick="loadPainting(${painting.PaintingID})">${painting.Title}</button>
                `;
                paintingsList.appendChild(listItem);
            });
        })
        .catch(error => console.error('Error fetching paintings:', error));
});

function loadPainting(paintingID) {
    fetch(`/api/paintings/${paintingID}`)
        .then(response => response.json())
        .then(painting => {
            document.getElementById('PaintingID').value = painting.PaintingID;
            document.getElementById('Title').value = painting.Title;
            document.getElementById('Artist').value = `${painting.FirstName || ''} ${painting.LastName}`;
            document.getElementById('Description').value = painting.Description;
        })
        .catch(error => console.error('Error loading painting:', error));
}

function savePainting() {
    const paintingID = document.getElementById('PaintingID').value;
    const title = document.getElementById('Title').value;
    const artist = document.getElementById('Artist').value.split(' ');
    const description = document.getElementById('Description').value;

    fetch(`/api/paintings/${paintingID}`, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            Title: title,
            FirstName: artist[0],
            LastName: artist[1],
            Description: description
        })
    })
    .then(response => response.json())
    .then(data => {
        alert('Painting updated successfully!');
    })
    .catch(error => console.error('Error updating painting:', error));
}
